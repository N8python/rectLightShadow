(this["webpackJsonpdwitter-frontend"]=this["webpackJsonpdwitter-frontend"]||[]).push([[0],{141:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),c=a.n(o),l=(a(79),a(3)),i=a.n(l),s=a(6),u=a(5),m=a(2),d=(a(81),a(30)),p=a.n(d),f=a(7),h=a(12),b=a(65);function g(e){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),e.next=3,fetch("https://www.dwitter.net/apiv2beta/"+t,{headers:Object(s.a)({Accept:"application/json"},a?{Authorization:"token "+a}:{})});case 3:if(n=e.sent,a&&401===n.status&&localStorage.removeItem("token"),n.ok){e.next=9;break}return e.next=8,n.json();case 8:throw e.sent;case 9:return e.next=11,n.json();case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("token"),e.next=3,fetch("https://www.dwitter.net/apiv2beta/"+t,{method:"post",body:JSON.stringify(a.data),headers:Object(s.a)({"Content-Type":"application/json",Accept:"application/json"},n?{Authorization:"token "+n}:{})});case 3:if(r=e.sent,n&&401===r.status&&localStorage.removeItem("token"),r.ok){e.next=9;break}return e.next=8,r.json();case 8:throw e.sent;case 9:return e.next=11,r.json();case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return x.apply(this,arguments)}function x(){return(x=Object(u.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),e.next=3,fetch("https://www.dwitter.net/apiv2beta/"+t,{method:"delete",headers:Object(s.a)({"Content-Type":"application/json",Accept:"application/json"},a?{Authorization:"token "+a}:{})});case 3:if(n=e.sent,a&&401===n.status&&localStorage.removeItem("token"),n.ok){e.next=9;break}return e.next=8,n.json();case 8:throw e.sent;case 9:return e.next=11,n;case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(u.a)(i.a.mark((function e(t,a,n,r,o){var c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new Date,l="","week"===o&&(l=new Date(+c-6048e5).toISOString()),"month"===o&&(l=new Date(+c-2592e6).toISOString()),"year"===o&&(l=new Date(+c-31536e6).toISOString()),e.abrupt("return",g("dweets/?offset=".concat(10*r,"&username=").concat(encodeURIComponent(n),"&order_by=").concat(encodeURIComponent(t),"&hashtag=").concat(encodeURIComponent(a),"&posted_after=").concat(encodeURIComponent(l))));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g("dweets/"+t+"/"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){return N.apply(this,arguments)}function N(){return(N=Object(u.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y("dweets/".concat(t,"/set_like/"),{data:{like:a}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return _.apply(this,arguments)}function _(){return(_=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E("dweets/".concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return D.apply(this,arguments)}function D(){return(D=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E("comments/".concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){return R.apply(this,arguments)}function R(){return(R=Object(u.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y("api-token-auth/",{data:{username:t,password:a}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,a,n){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(i.a.mark((function e(t,a,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y("users/",{data:{username:t,email:a,password:n,password2:r}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return A.apply(this,arguments)}function A(){return(A=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g("users/me/"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g("users/".concat(t,"/stats/")));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y("dweets/".concat(t,"/add_comment/"),{data:{text:a}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return M.apply(this,arguments)}function M(){return(M=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y("dweets/".concat(t,"/report/"),{data:{}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return K.apply(this,arguments)}function K(){return(K=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y("comments/".concat(t,"/report/"),{data:{}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t,a){return Z.apply(this,arguments)}function Z(){return(Z=Object(u.a)(i.a.mark((function e(t,a,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y("dweets/",{data:{code:t,"first-comment":a,remix_of:n}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t){return G.apply(this,arguments)}function G(){return(G=Object(u.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y("users/me/set_password/",{data:{old_password:t,new_password:a}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return V.apply(this,arguments)}function V(){return(V=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y("users/me/set_email/",{data:{email:t}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t){var a={width:32,height:32,borderRadius:16,boxShadow:"0 0px 2px rgba(0, 0, 0, 0.2)",marginRight:t?0:16,marginLeft:t?8:0,background:"#f5f5f5"};return e.avatar?r.a.createElement("img",{src:e.avatar,alt:"",style:a}):r.a.createElement("div",{style:a})}function Q(e){return r.a.createElement("span",{style:{fontWeight:"bold"},className:"username-text"},r.a.createElement("span",{style:{opacity:"0.5",fontWeight:"normal"}},"u/"),e.username)}var X=function(e){var t={fontWeight:"bold",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"};return r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},$(e.user,!1),!1!==e.link?r.a.createElement(f.b,{to:"/u/"+e.user.username,className:"no-link-color"},r.a.createElement("div",{style:t},Q(e.user))):r.a.createElement("div",{style:t},Q(e.user)))},ee=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.b,{to:"/u/"+e.user.username,className:"no-link-color"},Q(e.user)),$(e.user,!0))},te=function(e){return"hsl(205, 32%, ".concat(e,"%)")},ae={light:{key:"light",mainTextColor:"#000",pageBackgroundColor:"#f5f5f5",headerBackgroundColor:"#fff",mainBackgroundColor:"#fff",secondaryBackgroundColor:"#eee",secondaryTextColor:"#222",secondaryBorderColor:"#aaa",codeEditorBackgroundColor:"#222",focusedTextInputBackgroundColor:"#fff",focusedTextInputTextColor:"#000",modalBackgroundColor:"#fff",primary:"#007bff",switchOffBackgroundColor:"#666",primaryBackgroundTint:"#d1e7ff",primaryTextTint:"#15467c"},dark:{key:"dark",mainTextColor:"#eee",pageBackgroundColor:te(10),headerBackgroundColor:"#000",mainBackgroundColor:te(18),secondaryBackgroundColor:te(13),secondaryTextColor:"#888",secondaryBorderColor:te(13),codeEditorBackgroundColor:te(13),focusedTextInputBackgroundColor:"#222",focusedTextInputTextColor:"#fff",modalBackgroundColor:te(10),primary:"#007bff",switchOffBackgroundColor:"#666",primaryBackgroundTint:"#022248",primaryTextTint:"#a6d1ff"}},ne=r.a.createContext([{user:null,requireLogin:function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),theme:ae.dark},function(){return 0}]),re=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(!1),d=Object(m.a)(l,2),p=d[0],f=d[1],h=Object(n.useContext)(ne),b=Object(m.a)(h,2),g=b[0],v=(b[1],e.dweetId?"dweet":"comment");return r.a.createElement("a",{href:"/",style:Object(s.a)(Object(s.a)({},e.isEmptyStateDweet?{background:"var(--blue)",borderRadius:4,opacity:.33}:{}),o?{color:"gray"}:{}),onClick:function(){var t=Object(u.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!o){t.next=3;break}return t.abrupt("return");case 3:if(window.confirm("Are you sure you want to report this to a moderator?")){t.next=5;break}return t.abrupt("return");case 5:return t.prev=5,t.next=8,g.requireLogin({reason:"You need to log in in order to report this ".concat(v,"! Log in now, the ").concat(v," will be reported."),nextAction:"report ".concat(v)});case 8:t.next=13;break;case 10:return t.prev=10,t.t0=t.catch(5),t.abrupt("return");case 13:if(f(!0),t.prev=14,!e.dweetId){t.next=18;break}return t.next=18,q(e.dweetId);case 18:if(!e.commentId){t.next=21;break}return t.next=21,U(e.commentId);case 21:c(!0),t.next=28;break;case 24:t.prev=24,t.t1=t.catch(14),alert("Something went wrong when trying to report this ".concat(v,". If this persists, let us know on discord.")),c(!1);case 28:return t.prev=28,f(!1),t.finish(28);case 31:case"end":return t.stop()}}),t,null,[[5,10],[14,24,28,31]])})));return function(e){return t.apply(this,arguments)}}()},p?"reporting":o?"reported":"report")},oe=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),o=a[0],c=a[1],l=Object(n.useContext)(ne),d=Object(m.a)(l,2),p=d[0],f=(d[1],e.dweetId?"dweet":"comment");return r.a.createElement("a",{href:"/",style:Object(s.a)({},e.isEmptyStateDweet?{background:"var(--blue)",borderRadius:4,opacity:.33}:{color:"var(--red)"}),onClick:function(){var t=Object(u.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),window.confirm("Are you sure you want to delete this "+f+"?")){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,p.requireLogin({reason:"You need to log in in order to delete this ".concat(f,"! Log in now, the ").concat(f," will be deleted if it's yours."),nextAction:"Delete ".concat(f)});case 6:t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(3),t.abrupt("return");case 11:if(c(!0),t.prev=12,!e.dweetId){t.next=19;break}return t.next=16,C(e.dweetId);case 16:e.onDeleted&&e.onDeleted(),t.next=23;break;case 19:if(!e.commentId){t.next=23;break}return t.next=22,I(e.commentId);case 22:e.onDeleted&&e.onDeleted();case 23:t.next=29;break;case 25:t.prev=25,t.t1=t.catch(12),console.log(t.t1),alert("Something went wrong when trying to delete this ".concat(f,". If this persists, let us know on discord."));case 29:return t.prev=29,c(!1),t.finish(29);case 32:case"end":return t.stop()}}),t,null,[[3,8],[12,25,29,32]])})));return function(e){return t.apply(this,arguments)}}()},o?"deleting":"delete")},ce=a(34),le=a.n(ce),ie=(a(98),a(99),a(143)),se=a(41),ue=a.n(se),me=a(67),de=a.n(me),pe=a(68),fe=a.n(pe),he=a(73),be=function(e){return Object(he.a)(e.replace(/\r\n/g,"\n")).length},ge=function(e){return-1!==e.lastIndexOf("eval(unescape(escape")&&-1!==e.lastIndexOf(".replace(/u")};var ve=function(e,t){var a,n,r;t("");var o=escape(e.slice(e.lastIndexOf("eval(unescape(escape")+21,e.lastIndexOf(".replace(/u")-1)),c=e.slice(e.lastIndexOf(".replace(/u"),e.length).replace(/\s/g,""),l=2;-1!==c.indexOf("')")?l+=c.indexOf("')"):-1!==c.indexOf('")')?l+=c.indexOf('")'):-1!==c.indexOf("`)")&&(l+=c.indexOf("`)"));var i=c.indexOf(","),s=c.slice(9,i),u=c.slice(i+1,c.length).match(/('(.*?)'\)|"(.*?)"\)|`(.*?)`\))/),m=unescape(o.replace(function(e){var t=e.split("/"),a=t.pop();t.shift();var n=t.join("/");return new RegExp(n,a)}(s),u&&null!==(a=null!==(n=null!==(r=u[2])&&void 0!==r?r:u[3])&&void 0!==n?n:u[4])&&void 0!==a?a:""));return(e.slice(0,e.lastIndexOf("eval(unescape(escape"))+m+c.slice(l+2,c.length)).trim()},ye=function(e){var t=e.dweet,a=e.onUpdate,o=Object(n.useContext)(ne),c=Object(m.a)(o,1)[0],l=Object(n.useState)(!1),d=Object(m.a)(l,2),p=d[0],f=d[1],h=Object(n.useState)((null===t||void 0===t?void 0:t.has_user_awesomed)||!1),b=Object(m.a)(h,2),g=b[0],v=b[1],y=Object(n.useState)(-1),w=Object(m.a)(y,2),E=w[0],x=w[1],j=null===t||-1===(null===t||void 0===t?void 0:t.id);Object(n.useEffect)((function(){v((null===t||void 0===t?void 0:t.has_user_awesomed)||!1),t&&1!==t.id&&x((function(e){return-1===e?t.awesome_count-(t.has_user_awesomed?1:0):e}))}),[t]);var O="0.3s cubic-bezier(0.680, -0.550, 0.265, 1.550)";return r.a.createElement("div",{className:"border-radius d-flex"},r.a.createElement("div",{style:{width:32,height:32,background:g?c.theme.primaryBackgroundTint:"var(--secondaryBackgroundColor)",borderTopLeftRadius:4,borderBottomLeftRadius:4,overflow:"hidden",transition:"background ".concat(O)}},!j&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{height:32,alignItems:"center",justifyContent:"center",display:"flex",transform:"translate3d(0px, ".concat(g?0:-32,"px, 0px)"),transition:"transform ".concat(O),color:c.theme.primaryTextTint}},E+1),r.a.createElement("div",{style:{height:32,alignItems:"center",justifyContent:"center",display:"flex",transform:"translate3d(0px, ".concat(g?0:-32,"px, 0px)"),transition:"transform ".concat(O)}},E))),r.a.createElement("button",{disabled:p||j,className:g?"btn btn-primary":"btn btn-secondary",style:Object(s.a)({height:32,padding:"0 8px",display:"flex",justifyContent:"center",alignItems:"center",borderTopLeftRadius:0,borderBottomLeftRadius:0},j?{color:"#0000"}:{}),onClick:function(){var e=Object(u.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.target.blur(),n.preventDefault(),t){e.next=4;break}return e.abrupt("return");case 4:return f(!0),e.prev=5,e.next=8,c.requireLogin({reason:"You need to log in in order to Awesome this dweet!",nextAction:'click "Awesome!"'});case 8:v((function(e){return S(t.id,!t.has_user_awesomed).then(a),!e})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),console.log(e.t0),alert("Something went wrong. Please try again later.");case 15:return e.prev=15,f(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[5,11,15,18]])})));return function(t){return e.apply(this,arguments)}}()},"Awesome!"))};ue.a.registerLanguage("js",de.a);for(var we=function(e){var t=Object(n.useState)(null),a=Object(m.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(null),d=Object(m.a)(l,2),f=d[0],b=d[1],g=Object(n.useState)(!1),v=Object(m.a)(g,2),y=v[0],w=v[1],E=Object(n.useState)(null),x=Object(m.a)(E,2),j=x[0],O=x[1],k=Object(n.useState)(""),S=Object(m.a)(k,2),N=S[0],C=S[1],_=Object(n.useState)(!1),I=Object(m.a)(_,2),D=I[0],T=I[1],R=Object(n.useState)(""),B=Object(m.a)(R,2),L=B[0],W=B[1],A=Object(n.useState)(!1),F=Object(m.a)(A,2),P=F[0],q=F[1],M=Object(n.useState)(!1),U=Object(m.a)(M,2),K=U[0],Z=U[1],H=Object(n.useState)(null),G=Object(m.a)(H,2),J=G[0],V=G[1],$=Object(n.useContext)(ne),Q=Object(m.a)($,1)[0],ee=null===e.dweet,te=D&&!ee;Object(n.useEffect)((function(){o&&new IntersectionObserver((function(e){e.forEach((function(e){te!==e.isIntersecting&&T(e.isIntersecting)}))})).observe(o)}),[o,te]),Object(n.useEffect)((function(){var e=function(e){e.source===(null===f||void 0===f?void 0:f.contentWindow)&&("http://dweet.localhost:8000"!==e.origin&&"https://dweet.dwitter.net"!==e.origin||"error"===e.data.type&&Be(e.data.error))};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}),[f]);var ae=Object(n.useState)(!1),ce=Object(m.a)(ae,2),se=ce[0],ue=ce[1],me=Object(n.useState)(!1),de=Object(m.a)(me,2),pe=de[0],he=de[1],we=Object(n.useRef)(null),Oe=j||e.dweet||{id:-1,deleted:!1,code:"",awesome_count:0,author:{id:-1,username:"",avatar:""},posted:"",link:"",has_user_awesomed:!1,comments:[],remix_of:null,remixes:[]},ke=Object(n.useState)((null===Oe||void 0===Oe?void 0:Oe.code)||""),Se=Object(m.a)(ke,2),Ne=Se[0],Ce=Se[1],_e=Object(n.useMemo)((function(){return(null===Oe||void 0===Oe?void 0:Oe.code)||""}),[]),Ie=Object(n.useMemo)((function(){return ge(_e)}),[_e]),De=Object(n.useState)(""),Te=Object(m.a)(De,2),Re=Te[0],Be=Te[1],Le=Oe.comments.length>0&&Oe.comments[0].author.id===Oe.author.id,We=Oe.comments.some((function(e){return e.text.toUpperCase().indexOf("#NSFW")>=0})),Ae=Oe.comments.length>6&&!y,Fe=Ae?Oe.comments.slice(Oe.comments.length-5):Oe.comments,ze=Object(n.useCallback)((function(){if(Ie&&!P)return _e;var e=function e(t){if(t.length<1)return t;for(var a=!1,n="",r=0;r<t.length;r+=2){var o=t.charCodeAt(r),c=t.charCodeAt(r+1);o<207&&!Number.isNaN(c)&&c<207?n+=String.fromCharCode(Number("0x"+o.toString(16).padStart(2,"0")+c.toString(16).padStart(2,"0"))):o<207&&Number.isNaN(c)?n+=String.fromCharCode(Number("0x"+o.toString(16).padStart(2,"0")+"20")):(o>255&&o<53248?(a=!0,n+=String.fromCharCode(Number(escape(t[r]).replace(/%u../g,"0x00")))):n+=t[r],r--)}return a?e(unescape(escape(n).replace(/u([^D].)/g,"$1%"))):"eval(unescape(escape`"+n+"`.replace(/u([^D].)/g,'$1%')))"}(Ne);try{return encodeURIComponent(e),Be(""),e}catch(t){return Be("An error occurred while trying to compress the code"),Ne}}),[Ne,_e,P,Ie]),Pe=Object(n.useMemo)((function(){try{return encodeURIComponent(Ne)}catch(e){return Be("Encoding error"),""}}),[Ne,Be,Re]);return Oe.deleted?r.a.createElement("div",{className:"card p-3 mb-3"},r.a.createElement("div",{className:"d-flex align-items-center mb-3"},r.a.createElement("span",{style:{textAlign:"left"}},"[ this dweet no longer exists ]"),r.a.createElement("div",{style:{flex:1}}),r.a.createElement(xe,{dweet:Oe}))):r.a.createElement("div",{className:"card p-3 mb-3"},r.a.createElement("div",{style:{padding:"0 0 56.25%",position:"relative",height:0,width:"100%",marginBottom:16}},r.a.createElement("div",{ref:c,style:{position:"absolute",top:0,left:0,right:0,bottom:0}},te&&r.a.createElement("iframe",{ref:b,title:"dweet_"+Oe.id,src:"".concat("https://dweet.dwitter.net/","id/").concat(Oe.id)+"?".concat(We?"spoiler":"autoplay","=true&code=").concat(Pe),sandbox:"allow-same-origin allow-scripts",style:{width:"100%",height:"100%",border:0,borderRadius:2}}))),r.a.createElement("div",{style:{display:"flex",alignItems:"center",marginBottom:32}},r.a.createElement("div",{style:{flex:1}},r.a.createElement("div",{style:{display:"flex",alignItems:"stretch"}},r.a.createElement(ye,{dweet:Oe,onUpdate:O}))),Q.user&&Oe.author.id==(null===Q||void 0===Q?void 0:Q.user.id)?r.a.createElement(oe,{dweetId:Oe.id,isEmptyStateDweet:ee,onDeleted:function(){O(Object(s.a)(Object(s.a)({},Oe),{},{deleted:!0}))}}):r.a.createElement(r.a.Fragment,null,Q.user&&(null===Q||void 0===Q?void 0:Q.user.is_staff)&&r.a.createElement("span",null,r.a.createElement(oe,{dweetId:Oe.id,isEmptyStateDweet:ee,onDeleted:function(){O(Object(s.a)(Object(s.a)({},Oe),{},{deleted:!0}))}})),r.a.createElement("div",{style:{marginLeft:16}},r.a.createElement(re,{dweetId:Oe.id,isEmptyStateDweet:ee}))),r.a.createElement("a",{href:"#",style:Object(s.a)({marginLeft:16},ee?{background:"var(--blue)",borderRadius:4,opacity:.33}:{}),onClick:function(e){e.preventDefault(),ee||ue(!0)}},"share"),Oe.remixes.length>0&&r.a.createElement("a",{href:"#",style:Object(s.a)({marginLeft:16},ee?{background:"var(--blue)",borderRadius:4,opacity:.33}:{}),onClick:function(e){e.preventDefault(),ee||he(!0)}},Oe.remixes.length," remix",Oe.remixes.length>1&&"es"),r.a.createElement("a",{href:"#",style:Object(s.a)({marginLeft:16},ee?{background:"var(--blue)",borderRadius:4,opacity:.33}:{}),onClick:function(e){e.preventDefault(),ee||null===o||void 0===o||o.requestFullscreen()}},"fullscreen")),r.a.createElement("div",{className:"d-flex align-items-center mb-3"},r.a.createElement(X,{user:Oe.author}),r.a.createElement("div",{style:{flex:1}}),r.a.createElement(xe,{dweet:Oe})),r.a.createElement("div",{style:Object(s.a)({background:Q.theme.codeEditorBackgroundColor,marginLeft:-16,marginRight:-16,padding:16,color:"gray",fontFamily:"monospace"},ee?{color:"#0000"}:{})},"function u(t)"," {",-1!==Oe.id&&(ee||ge(_e)||K)&&r.a.createElement("label",{style:{float:"right",margin:0,cursor:"pointer"},className:"d-flex align-items-center"},r.a.createElement("span",{className:"mr-3"},"Compressed"),r.a.createElement(fe.a,{onColor:Q.theme.primary,offColor:Q.theme.switchOffBackgroundColor,height:16,width:40,checkedIcon:r.a.createElement("span",null),uncheckedIcon:r.a.createElement("span",null),checked:ge(Ne),onChange:function(){return Ce((function(e){return ge(e)?ve(e,Be):ze()}))}})),r.a.createElement("div",{className:"d-flex flex-column",style:{height:80,marginBottom:16,marginTop:8}},!ee&&r.a.createElement(le.a,{showGutter:!1,wrapEnabled:!0,showPrintMargin:!1,highlightActiveLine:!1,fontSize:14,value:Ne,mode:"javascript",theme:"monokai",onFocus:function(){Z(!0)},onChange:function(e){Ce(e),Be(""),q(e!==_e)},style:{width:"100%",flex:1,border:0,background:"transparent",color:"white"}})),"} //"," ",r.a.createElement("span",{style:{color:be(Ne)>140?"red":"inherit"}},be(Ne),"/140"),r.a.createElement("div",{style:{float:"right"}},r.a.createElement("a",{className:"no-link-styling",href:"https://dwitter.net/d/"+Oe.id},new Date(Oe.posted).toLocaleString())),r.a.createElement("div",null,r.a.createElement("pre",{style:{color:"red"}},Re)),r.a.createElement("div",null,r.a.createElement("form",{style:{marginTop:32},onSubmit:function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,Q.requireLogin({reason:"You need to be logged in to post dweets. Please log in now and your remix will immediately publish.",nextAction:"post remix"});case 4:return e.next=6,Y(Ne,L,Oe.id);case 6:a=e.sent,V("/d/"+a.id),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("Failed to post remix");case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},J&&r.a.createElement(h.a,{to:J}),r.a.createElement("div",{className:L?"shadow-primary border-radius":"",style:{position:"relative",display:K?"block":"none"}},r.a.createElement("input",{type:"text",disabled:ee,ref:we,style:{paddingRight:64,background:"transparent",color:"white",borderColor:"gray",border:"1px solid"},placeholder:P?"Add a caption here...":"Change the code...",className:"form-control",value:L,onChange:function(e){return W(e.target.value)}}),r.a.createElement("div",{style:{position:"absolute",right:0,top:0,bottom:0}},r.a.createElement("button",{style:Object(s.a)({borderTopLeftRadius:0,borderBottomLeftRadius:0},ee?{color:"#0000"}:{}),className:"btn "+(P?"btn-primary":"btn-secondary"),disabled:!P||ee||be(Ne)>140},"Post as Remix")))))),Le&&r.a.createElement("div",{style:{padding:16,display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",borderBottom:Oe.comments.length>1?"1px solid ".concat(Q.theme.secondaryBorderColor):"none"}},r.a.createElement(p.a,{componentDecorator:function(e,t,a){return r.a.createElement("a",{target:"_blank",href:e,key:a},t)}},Oe.comments[0].text)),Ae&&r.a.createElement("div",{style:{padding:16,textAlign:"center"}},r.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),w(!0)}},"Show more comments...")),Fe.slice(Le?1:0).map((function(e){return r.a.createElement(Ee,{comment:e,deletePermission:Q.user&&e.author.id==(null===Q||void 0===Q?void 0:Q.user.id),moderator:!!(null===Q||void 0===Q?void 0:Q.user)&&(null===Q||void 0===Q?void 0:Q.user.is_staff),isEmptyStateDweet:ee})})),r.a.createElement("form",{style:{marginTop:32},onSubmit:function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,Q.requireLogin({reason:"You need to log in in order to post this comment! Log in now, and this comment will be posted: "+N,nextAction:"post comment"});case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return");case 9:return e.prev=9,e.t1=O,e.next=13,z(Oe.id,N);case 13:e.t2=e.sent,(0,e.t1)(e.t2),C(""),null===(a=we.current)||void 0===a||a.blur(),e.next=22;break;case 19:e.prev=19,e.t3=e.catch(9),alert("Error posting comment");case 22:case"end":return e.stop()}}),e,null,[[1,6],[9,19]])})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement("div",{className:N?"shadow-primary border-radius":"",style:{position:"relative"}},r.a.createElement("input",{type:"text",disabled:ee,ref:we,style:{paddingRight:64},className:"form-control",value:N,onChange:function(e){return C(e.target.value)}}),r.a.createElement("div",{style:{position:"absolute",right:0,top:0,bottom:0}},r.a.createElement("button",{style:Object(s.a)({borderTopLeftRadius:0,borderBottomLeftRadius:0},ee?{color:"#0000"}:{}),className:"btn "+(0===N.length?"btn-secondary":"btn-primary"),disabled:0===N.length||ee},"Comment")))),r.a.createElement(ie.a,{isOpen:pe,toggle:function(){return he(!pe)}},r.a.createElement("div",{className:"p-3"},r.a.createElement("div",{className:"mb-3",style:{fontWeight:"bold",textAlign:"center",position:"relative"}},r.a.createElement("a",{href:"#",style:{position:"absolute",right:0,top:0,fontWeight:"normal"},onClick:function(e){e.preventDefault(),he(!1)}},"close"),"Remixes of d/",Oe.id),r.a.createElement(je,{dweet_ids:Oe.remixes}))),r.a.createElement(ie.a,{isOpen:se,keyboard:!0,toggle:function(){return ue(!se)}},r.a.createElement("div",{className:"p-3"},r.a.createElement("div",{className:"mb-3",style:{fontWeight:"bold",textAlign:"center",position:"relative"}},r.a.createElement("a",{href:"#",style:{position:"absolute",right:0,top:0,fontWeight:"normal"},onClick:function(e){e.preventDefault(),ue(!1)}},"close"),"Share d/",Oe.id),r.a.createElement("label",null,"Permalink"),r.a.createElement("input",{className:"form-control mb-3",type:"text",readOnly:!0,value:"https://dwitter.net/d/"+Oe.id}),r.a.createElement("label",null,"Iframe embed"),r.a.createElement("input",{className:"form-control",type:"text",readOnly:!0,value:'<iframe width=500 height=570 frameBorder="0" src="https://www.dwitter.net/e/'.concat(Oe.id,'" allowFullScreen="true"></iframe>')}))))},Ee=function(e){var t=e.comment,a=e.deletePermission,o=e.moderator,c=e.isEmptyStateDweet,l=t.text,i=[{text:"",type:"text"}],s=!1,u=0,d=Object(n.useState)(!1),h=Object(m.a)(d,2),b=h[0],g=h[1];if(b)return null;for(;u<l.length;){var v=l[u];if("\\"===v&&s&&"`"===l[u+1])i[i.length-1].text+="`",u+=2;else if("`"!==v)i[i.length-1].text+=v,u++;else{if(s){s=!1,u++,i.push({text:"",type:"text"});continue}s=!0,u++,i.push({text:"",type:"code"})}}return r.a.createElement("div",{key:t.id,style:{marginTop:16},className:"hover-parent"},r.a.createElement("div",{className:"hover-parent",style:{float:"right",padding:"2px 8px",fontSize:10,borderRadius:4,background:"#f5f5f5",alignItems:"center",justifyContent:"center"}},r.a.createElement("div",{className:"show-on-parent-hover"},a?r.a.createElement(oe,{commentId:t.id,onDeleted:function(){g(!0)},isEmptyStateDweet:c}):r.a.createElement(r.a.Fragment,null,r.a.createElement(re,{commentId:t.id,isEmptyStateDweet:c}),o&&r.a.createElement("div",{style:{marginLeft:16}},r.a.createElement(oe,{commentId:t.id,onDeleted:function(){g(!0)},isEmptyStateDweet:c}))))),r.a.createElement(X,{user:t.author}),r.a.createElement("div",{style:{marginLeft:48}},i.map((function(e,t){return"code"===e.type?r.a.createElement("code",{key:t,style:{display:"inline-flex",background:"hsl(0, 0%, 92.5%)",borderRadius:4,padding:"2px 4px",fontSize:12,flexWrap:"wrap"}},ue.a.highlight("js",e.text).emitter.rootNode.children.map((function(e,t){return function e(t,a){return"string"===typeof t?r.a.createElement("span",{key:a},t):r.a.createElement("span",{key:a,className:"hljs-"+t.kind},t.children.map((function(t,a){return e(t,a)})))}(e,t)}))):r.a.createElement(p.a,{key:t,componentDecorator:function(e,t,a){return r.a.createElement(f.b,{target:"_blank",key:a,to:e},t)}},e.text)}))))},xe=function(e){var t=e.dweet;return t.remix_of?t.remix_of.deleted?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Remix of "),r.a.createElement(f.b,{to:"/d/"+t.remix_of.id,className:"no-link-color mx-2"},r.a.createElement("span",{style:{opacity:"0.5"}},"[ deleted ]"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Remix of "),r.a.createElement(f.b,{to:"/d/"+t.remix_of.id,className:"no-link-color mx-2"},r.a.createElement("span",{style:{opacity:"0.5"}},"d/"),t.remix_of.id),r.a.createElement("span",{className:"mr-2"}," by "),r.a.createElement(ee,{user:t.remix_of.author})):r.a.createElement(r.a.Fragment,null)},je=function(e){var t=e.dweet_ids;return r.a.createElement(r.a.Fragment,null,t.map((function(e,t){return r.a.createElement(Oe,{key:t,dweet_id:e})})))},Oe=function(e){var t=e.dweet_id,a=Object(n.useState)(null),o=Object(m.a)(a,2),c=o[0],l=o[1];return Object(n.useEffect)((function(){O(t).then((function(e){l(e)}))}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.b,{to:"/d/"+t,className:"no-link-color mx-2"},r.a.createElement("span",{style:{opacity:"0.5"}},"d/"),t),r.a.createElement("span",{className:"mr-2"}," by "),c&&r.a.createElement(ee,{user:c.author}),!c&&r.a.createElement("span",null,"..."),r.a.createElement("br",null))},ke=a(17),Se=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),o=a[0],c=a[1],l=Object(n.useRef)({current:0,target:0}),i=Object(n.useState)(0),s=Object(m.a)(i,2),u=s[0],d=s[1],p=Object(n.useState)({awesome_count:0,dweet_count:0}),h=Object(m.a)(p,2),g=h[0],v=h[1],y=e.match.params.hashtag||"",w=e.match.params.username||"",E=Object(n.useRef)(null),x=E.current,O=Object(n.useContext)(ne),k=Object(m.a)(O,1)[0];Object(n.useEffect)((function(){x&&new IntersectionObserver((function(e){var t,a=Object(b.a)(e);try{for(a.s();!(t=a.n()).done;){t.value.intersectionRatio>0&&l.current.target===l.current.current&&(l.current.target+=1,d(l.current.target))}}catch(n){a.e(n)}finally{a.f()}})).observe(x)}),[x]),Object(n.useEffect)((function(){(function(e,t,a,n,r){return j.apply(this,arguments)})(e.order_by,y,w,u,e.period||"all").then((function(e){l.current.current=u,c((function(t){return t[u]=e.results,t.slice()}))}))}),[y,u,e.order_by,w,e.period,e.history.length]),Object(n.useEffect)((function(){w&&function(e){return F.apply(this,arguments)}(w).then(v)}),[w]);var S=y?"/h/"+y:"/u/"+w;return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",position:"relative"}},r.a.createElement(ke.a,null,r.a.createElement("title",null,e.name)),r.a.createElement("div",{style:{maxWidth:632,width:"100%",padding:16,flex:1,display:"flex",flexDirection:"column"}},y||w?r.a.createElement("div",{className:"card text-center mb-3 p-3"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("div",{style:{fontWeight:"bold",marginRight:16,flex:1,textAlign:"left"}},y&&"#"+y,w&&r.a.createElement("span",{title:"Total dweets: ".concat(g.dweet_count)},"u/".concat(w,"(").concat(g.awesome_count,")"))),r.a.createElement("div",{style:{marginLeft:16,display:"flex"}},r.a.createElement(f.c,{to:"".concat(S,"/hot"),exact:!0,style:{width:48},activeStyle:{fontWeight:"bold"}},"hot"),r.a.createElement(f.c,{to:"".concat(S,"/new"),exact:!0,style:{width:48},activeStyle:{fontWeight:"bold"}},"new"),r.a.createElement(f.c,{to:"".concat(S,"/top"),exact:!0,style:{width:48},activeStyle:{fontWeight:"bold"}},"top")))):r.a.createElement("div",{className:"card text-center mb-3 px-3",style:{paddingTop:4,paddingBottom:4,display:"flex",color:"white",flexDirection:"column",justifyContent:"center",alignItems:"center"}},r.a.createElement(f.b,{to:"/h/cavern/top",href:"#",style:{fontWeight:"bold",padding:"12px 16px 16px 16px"}},"#cavern"),r.a.createElement("div",{style:{background:k.theme.secondaryBackgroundColor,color:k.theme.secondaryTextColor,marginTop:-4,marginBottom:-4,marginLeft:-16,marginRight:-16,paddingTop:4,paddingBottom:4,paddingRight:16,paddingLeft:16,alignSelf:"stretch",textAlign:"center"}},"Theme challenge of the month")),0===o.length&&r.a.createElement(we,{dweet:null}),o.flat().map((function(e){return r.a.createElement(we,{key:e.id,dweet:e})}))),r.a.createElement("div",{ref:E,style:{position:"absolute",bottom:0,left:0,right:0,height:"100vh",pointerEvents:"none"}}))},Ne=function(e){var t,a=Object(n.useState)(""),o=Object(m.a)(a,2),c=o[0],l=o[1],s=Object(n.useState)(""),d=Object(m.a)(s,2),p=d[0],h=d[1],b=Object(n.useContext)(ne),g=Object(m.a)(b,2)[1],v=Object(n.useState)(!1),y=Object(m.a)(v,2),w=y[0],E=y[1],x=Object(n.useState)(null),j=Object(m.a)(x,2),O=j[0],k=j[1];return r.a.createElement("form",{noValidate:!0,className:w||O&&!(null===(t=O.non_field_errors)||void 0===t?void 0:t.length)?"was-validated":"needs-validation",style:{maxWidth:288,flex:1,display:"flex",flexDirection:"column"},onSubmit:function(){var t=Object(u.a)(i.a.mark((function t(a){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),E(!0),t.prev=2,t.next=5,T(c,p);case 5:return n=t.sent,localStorage.setItem("token",n.token),t.next=9,W();case 9:r=t.sent,g({user:r}),localStorage.setItem("user",JSON.stringify(r)),l(""),h(""),e.onLogin(),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),k(t.t0);case 20:return t.prev=20,E(!1),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[2,17,20,23]])})));return function(e){return t.apply(this,arguments)}}()},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{autoFocus:!0,id:"username",name:"username",type:"text",className:"form-control mb-3",value:c,disabled:w,required:!0,onChange:function(e){return l(e.target.value)}}),O&&r.a.createElement("div",{className:"invalid-feedback",style:{marginTop:-8,marginBottom:8}},O.username),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{id:"password",name:"password",type:"password",className:"form-control mb-3",value:p,disabled:w,required:!0,onChange:function(e){return h(e.target.value)}}),O&&r.a.createElement("div",{className:"invalid-feedback",style:{marginTop:-8,marginBottom:8}},O.password),O&&O.non_field_errors&&r.a.createElement("div",{className:"alert alert-danger"},O.non_field_errors),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},r.a.createElement(f.b,{className:"mb-3 mt-3 mr-3",to:"/accounts/register"},"Register"),r.a.createElement("a",{className:"mb-3 mt-3 mr-3",href:"https://www.dwitter.net/accounts/password/reset/"},"Forgot password"),r.a.createElement("button",{className:"btn btn-primary mb-3 mt-3 shadow-primary",disabled:w},"Log in",e.nextAction&&" and "+e.nextAction)))},Ce=function(e){return localStorage.getItem("user")?r.a.createElement(h.a,{to:"/"}):r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(ke.a,null,r.a.createElement("title",null,"Log in")),r.a.createElement("div",{style:{maxWidth:632,flex:1,padding:16}},r.a.createElement("div",{style:{justifyContent:"center",display:"flex",flexDirection:"row"},className:"card p-3"},r.a.createElement(Ne,{onLogin:function(){e.history.push("/")}}))))},_e=function(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(""),d=Object(m.a)(l,2),p=d[0],f=d[1],h=Object(n.useState)(""),b=Object(m.a)(h,2),g=b[0],v=b[1],y=Object(n.useState)(""),w=Object(m.a)(y,2),E=w[0],x=w[1],j=Object(n.useContext)(ne),O=Object(m.a)(j,2)[1],k=Object(n.useState)(!1),S=Object(m.a)(k,2),N=S[0],C=S[1],_=Object(n.useState)(null),I=Object(m.a)(_,2),D=I[0],R=I[1];return r.a.createElement("form",{noValidate:!0,style:{maxWidth:288,flex:1,display:"flex",flexDirection:"column"},onSubmit:function(){var t=Object(u.a)(i.a.mark((function t(a){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),C(!0),t.prev=2,t.next=5,B(o,p,g,E);case 5:return t.next=7,T(o,g);case 7:return n=t.sent,localStorage.setItem("token",n.token),t.next=11,W();case 11:r=t.sent,O({user:r}),localStorage.setItem("user",JSON.stringify(r)),c(""),v(""),f(""),e.onLogin(),R(null),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(2),R(t.t0);case 24:return t.prev=24,C(!1),t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[2,21,24,27]])})));return function(e){return t.apply(this,arguments)}}()},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{autoFocus:!0,id:"username",name:"username",type:"text",className:"form-control mb-3 ".concat((null===D||void 0===D?void 0:D.username)?"is-invalid":""),value:o,disabled:N,required:!0,onChange:function(e){c(e.target.value),R((function(e){return Object(s.a)(Object(s.a)({},e),{},{username:void 0})}))}}),(null===D||void 0===D?void 0:D.username)&&r.a.createElement("div",{className:"invalid-feedback",style:{marginTop:-8,marginBottom:8}},D.username),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{id:"email",name:"email",type:"text",className:"form-control mb-3 ".concat((null===D||void 0===D?void 0:D.email)?"is-invalid":""),value:p,disabled:N,required:!0,onChange:function(e){f(e.target.value),R((function(e){return Object(s.a)(Object(s.a)({},e),{},{email:void 0})}))}}),D&&r.a.createElement("div",{className:"invalid-feedback",style:{marginTop:-8,marginBottom:8}},D.email),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{id:"password",name:"password",type:"password",className:"form-control mb-3 ".concat((null===D||void 0===D?void 0:D.password)?"is-invalid":""),value:g,disabled:N,required:!0,onChange:function(e){v(e.target.value),R((function(e){return Object(s.a)(Object(s.a)({},e),{},{password:void 0})}))}}),r.a.createElement("label",{htmlFor:"password2"},"Repeat password"),r.a.createElement("input",{id:"password2",name:"password2",type:"password",className:"form-control mb-3 ".concat((null===D||void 0===D?void 0:D.password)?"is-invalid":""),value:E,disabled:N,required:!0,onChange:function(e){x(e.target.value),R((function(e){return Object(s.a)(Object(s.a)({},e),{},{password:void 0})}))}}),D&&r.a.createElement("div",{className:"invalid-feedback",style:{marginTop:-8,marginBottom:8}},D.password),D&&D.non_field_errors&&r.a.createElement("div",{className:"alert alert-danger"},D.non_field_errors),r.a.createElement("button",{className:"btn btn-primary mb-3 mt-3 shadow-primary",style:{alignSelf:"flex-end"},disabled:N},"Register",e.nextAction&&" and "+e.nextAction))},Ie=function(e){return localStorage.getItem("user")?r.a.createElement(h.a,{to:"/"}):r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(ke.a,null,r.a.createElement("title",null,"Register")),r.a.createElement("div",{style:{maxWidth:632,flex:1,padding:16}},r.a.createElement("div",{style:{justifyContent:"center",display:"flex",flexDirection:"row"},className:"card p-3"},r.a.createElement(_e,{onLogin:function(){e.history.push("/")}}))))},De=function(){return r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(ke.a,null,r.a.createElement("title",null,"About")),r.a.createElement("div",{style:{maxWidth:632,flex:1,padding:16}},r.a.createElement("div",{className:"card p-3"},r.a.createElement("p",{style:{fontWeight:"bold"}},"About dwitter.net"),r.a.createElement("p",null,"Dwitter.net is a challenge to see what awesomeness you can create when limited to only 140 characters of javascript and a canvas. Give it a go!"),r.a.createElement("p",null,"It was created by ",r.a.createElement(f.b,{to:"/u/lionleaf"},"u/lionleaf")," as a side project inspired by the concept of"," ",r.a.createElement(f.b,{to:"/u/sigveseb"},"u/sigveseb")," at"," ",r.a.createElement("a",{href:"https://arkt.is/t/Yy53aWR0aD0yZTM7dCo9Mzt4LnRyYW5zbGF0ZSg5ODAsNDUwKTtmb3IoaT0wO2k8MzIyOyl4LmZpbGxTdHlsZT1SKGkpLHgucm90YXRlKCFpKkModC09LjAzKSshKGkrKyU0KSpTKHQpLzkrMS41NykseC5maWxsUmVjdCg1KmksNSppLDk5LDk5KQ==",target:"_blank",rel:"noopener noreferrer"},"arkt.is/t")," ","(",r.a.createElement("a",{href:"https://github.com/sigvef/arktis-tweet-demo",target:"_blank",rel:"noopener noreferrer"},"github"),"). Its first official launch was at the Demoparty 'Solskogen' in 2016 where it won"," ",r.a.createElement("a",{href:"http://www.pouet.net/prod.php?which=67794",target:"_blank",rel:"noopener noreferrer"},"the wild compo"),"."),r.a.createElement("p",null,"The website itself is open source, and is being developed by a number of"," ",r.a.createElement("a",{href:"https://github.com/lionleaf/dwitter/graphs/contributors",target:"_blank",rel:"noopener noreferrer"},"contributors"),". We are happy to accept pull requests and issues on"," ",r.a.createElement("a",{href:"https://github.com/lionleaf/dwitter",target:"_blank",rel:"noopener noreferrer"},"github"),". Check out the"," ",r.a.createElement("a",{href:"https://github.com/lionleaf/dwitter/issues",target:"_blank",rel:"noopener noreferrer"},"issue tracker")," ","for previous suggestions and discussions."),r.a.createElement("p",null,"Please join us in the"," ",r.a.createElement("a",{href:"https://discord.gg/emHe6cP",target:"_blank",rel:"noopener noreferrer"},"discord chat")," ","to hang out, ask for coding help, or discuss anything :D If you don't know where to start and want to learn, this is the perfect place to start. See you there!"),r.a.createElement("p",{style:{fontWeight:"bold"}},"Contact"),r.a.createElement("p",null,r.a.createElement("em",null,"andreas.l.selvik@gmail.com")," and"," ",r.a.createElement("em",null,"sigvefarstad@gmail.com")," or ",r.a.createElement("strong",null,"@lionleaf")," and"," ",r.a.createElement("strong",null,"@sigveseb")," on"," ",r.a.createElement("a",{href:"https://discord.gg/emHe6cP",target:"_blank",rel:"noopener noreferrer"},"Discord"),"."))))},Te=function(e){var t=Object(n.useState)("c.width=1920 // clear the canvas\nfor(i=0;i<9;i++)\nx.fillRect(400+i*100+S(t)*300,400,50,200) // draw 50x200 rects"),a=Object(m.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(""),s=Object(m.a)(l,2),d=s[0],p=s[1];return r.a.createElement("div",{className:"container-fluid",id:"new-dweet"},r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col dweet-view-col"},r.a.createElement("div",{className:"card p-3"},r.a.createElement("div",{style:{padding:"0 0 56.25% 0",position:"relative"}},r.a.createElement("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0}},r.a.createElement("iframe",{style:{border:0,width:"100%",height:"100%"},src:"https://dweet.dwitter.net/blank?autoplay=true&code="+encodeURIComponent(o)}))))),r.a.createElement("div",{className:"col dweet-editor-col"},r.a.createElement("div",{className:"card p-3",style:{background:"#272822"}},r.a.createElement("div",{style:{padding:"0 0 56.25% 0",position:"relative"}},r.a.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:4,overflow:"hidden"}},r.a.createElement(le.a,{value:o,onChange:c,mode:"javascript",theme:"monokai",style:{width:"100%",height:"100%"},showPrintMargin:!1,focus:!0,enableSnippets:!0,tabSize:2})))))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col",style:{justifyContent:"flex-end",display:"flex"}},r.a.createElement("div",{className:"card p-3",style:{maxWidth:400}},r.a.createElement("form",{style:{display:"flex",alignItems:"flex-end"},onSubmit:function(){var t=Object(u.a)(i.a.mark((function t(a){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,Y(o,d);case 3:n=t.sent,e.history.push("/d/"+n.id);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},localStorage.getItem("user")?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{flex:1}},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{id:"title",name:"title",type:"text",className:"form-control",value:d,onChange:function(e){return p(e.target.value)}})),r.a.createElement("button",{className:"btn btn-primary shadow-primary",style:{flexShrink:0,marginLeft:16},disabled:be(o)>140},"Post dweet")):r.a.createElement("p",null,"Please ",r.a.createElement(f.c,{to:"/accounts/login"},"log in")," (or"," ",r.a.createElement(f.c,{to:"/accounts/register"},"register"),") to post a dweet.",r.a.createElement("br",null),"Copy-paste the code somewhere safe to save it meanwhile."))))))},Re=function(e){var t=Object(n.useState)(null),a=Object(m.a)(t,2),o=a[0],c=a[1];return Object(n.useEffect)((function(){O(+e.match.params.id).then(c)}),[e.match.params.id]),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("div",{className:"mt-3",style:{maxWidth:632,flex:1}},o&&r.a.createElement(we,{dweet:o})))},Be=function(e){return r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("button",{className:"mb-3 mt-3 btn "+(e.disabled?"btn-secondary shadow":"btn-primary shadow-primary"),style:{alignSelf:"flex-end"},disabled:e.disabled},e.text),e.success&&r.a.createElement("div",{style:{marginLeft:16,color:"var(--success)",display:"flex",alignItems:"center"}},r.a.createElement("div",{style:{width:24,height:24,borderRadius:12,border:"1px solid var(--success)",marginRight:8,flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center"}},"\u2713"),e.successText))},Le=function(){var e,t,a=Object(n.useContext)(ne),o=Object(m.a)(a,2),c=o[0],l=o[1],d=Object(n.useState)(null),p=Object(m.a)(d,2),f=p[0],h=p[1],b=Object(n.useState)((null===(e=c.user)||void 0===e?void 0:e.email)||""),g=Object(m.a)(b,2),v=g[0],y=g[1],w=Object(n.useState)(!1),E=Object(m.a)(w,2),x=E[0],j=E[1],O=Object(n.useState)(!1),k=Object(m.a)(O,2),S=k[0],N=k[1],C=x&&!!(null===f||void 0===f?void 0:f.email),_=Object(n.useState)(!1),I=Object(m.a)(_,2),D=I[0],T=I[1],R=S||C||Object.keys(f||{}).length>0||v===(null===(t=c.user)||void 0===t?void 0:t.email);return r.a.createElement("form",{noValidate:!0,style:{flex:1},onSubmit:function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),N(!0),h(null),T(!1),e.prev=4,e.next=7,J(v);case 7:a=e.sent,l({user:a}),T(!0),y(a.email),j(!1),h(null),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),h(e.t0);case 18:return e.prev=18,N(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[4,15,18,21]])})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement("div",{style:{fontWeight:"bold",marginBottom:16}},"Change email"),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{id:"email",name:"email",style:{maxWidth:288},type:"email",disabled:S,className:"form-control mb-3 "+((null===f||void 0===f?void 0:f.email)?"is-invalid":""),value:v,required:!0,onChange:function(e){y(e.target.value),T(!1),(null===f||void 0===f?void 0:f.email)&&(delete f.email,h(Object(s.a)({},f)))}}),f&&r.a.createElement("div",{className:"invalid-feedback",style:{marginTop:-8,marginBottom:8}},f.email),f&&f.non_field_errors&&r.a.createElement("div",{className:"alert alert-danger"},f.non_field_errors),r.a.createElement(Be,{disabled:R,text:"Save",success:D,successText:"Saved."}))},We=function(){var e=Object(n.useState)(null),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),l=Object(m.a)(c,2),d=l[0],p=l[1],f=Object(n.useState)(""),h=Object(m.a)(f,2),b=h[0],g=h[1],v=Object(n.useState)(""),y=Object(m.a)(v,2),w=y[0],E=y[1],x=Object(n.useState)(!1),j=Object(m.a)(x,2),O=j[0],k=j[1],S=Object(n.useState)(!1),N=Object(m.a)(S,2),C=N[0],_=N[1],I=Object(n.useState)(!1),D=Object(m.a)(I,2),T=D[0],R=D[1],B=Object(n.useState)(!1),L=Object(m.a)(B,2),W=L[0],A=L[1],F=O&&!!(null===a||void 0===a?void 0:a.new_password),z=C&&T,P=Object(n.useState)(!1),q=Object(m.a)(P,2),M=q[0],U=q[1],K=!d||!b||!w||M||W||F||z||Object.keys(a||{}).length>0;return r.a.createElement("form",{noValidate:!0,style:{flex:1},onSubmit:function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),A(!0),o(null),U(!1),e.prev=4,e.next=7,H(d,b);case 7:p(""),g(""),E(""),k(!1),_(!1),R(!1),o(null),U(!0),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),o(e.t0);case 20:return e.prev=20,A(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[4,17,20,23]])})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement("div",{style:{fontWeight:"bold",marginBottom:16}},"Change password"),r.a.createElement("label",{htmlFor:"old_password"},"Old password"),r.a.createElement("input",{id:"old_password",name:"old_password",type:"password",style:{maxWidth:288},disabled:W,className:"form-control mb-3 "+((null===a||void 0===a?void 0:a.old_password)?"is-invalid":""),value:d,required:!0,onChange:function(e){p(e.target.value),(null===a||void 0===a?void 0:a.old_password)&&(delete a.old_password,o(Object(s.a)({},a)))}}),a&&r.a.createElement("div",{className:"invalid-feedback",style:{marginTop:-8,marginBottom:8}},a.old_password),r.a.createElement("div",{className:O?F?"needs-validation":"was-validated":""},r.a.createElement("label",{htmlFor:"new_password"},"New password"),r.a.createElement("input",{id:"new_password",style:{maxWidth:288},name:"new_password",type:"password",disabled:W,className:"form-control mb-3 "+(F?"is-invalid":""),value:b,required:!0,formNoValidate:!1,onChange:function(e){R(!1),g(e.target.value),k(!1),_(!1),a&&(delete a.new_password,o(Object(s.a)({},a)))},onBlur:function(){k(!0),b&&b.length<8&&o({new_password:["Password must be 8 characters or longer."]}),w&&(_(!0),b!==w&&R(!0))}}),a&&r.a.createElement("div",{className:"invalid-feedback",style:{marginTop:-8,marginBottom:8}},a.new_password)),r.a.createElement("div",{className:O&&!F&&!z&&C?z?"needs-validation":"was-validated":""},r.a.createElement("label",{htmlFor:"new_password2"},"New password (again)"),r.a.createElement("input",{id:"new_password2",style:{maxWidth:288},name:"new_password2",type:"password",disabled:W,value:w,required:!0,formNoValidate:!1,className:"form-control mb-3 "+(z?"is-invalid":""),onChange:function(e){_(!1),R(!1),E(e.target.value)},onBlur:function(){_(!0),b!==w&&R(!0)}}),T&&r.a.createElement("div",{className:"invalid-feedback",style:{marginTop:-8,marginBottom:8}},"Passwords do not match.")),a&&a.non_field_errors&&r.a.createElement("div",{className:"alert alert-danger"},a.non_field_errors),r.a.createElement(Be,{disabled:K,text:"Change password",success:M,successText:"Password changed."}))},Ae=function(){var e=Object(n.useContext)(ne),t=Object(m.a)(e,2),a=t[0],o=t[1];return r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(ke.a,null,r.a.createElement("title",null,"Settings")),r.a.createElement("div",{style:{maxWidth:632,flex:1,padding:16}},r.a.createElement("div",{className:"card p-3"},r.a.createElement(X,{user:a.user}),r.a.createElement("p",{className:"mt-3"},"Your avatar is automatically fetched from your email address. Change your avatar on"," ",r.a.createElement("a",{href:"https://gravatar.com/",target:"_blank",rel:"noopener noreferrer"},"Gravatar"),".")),r.a.createElement("div",{className:"card p-3 mt-3"},r.a.createElement(Le,null)),r.a.createElement("div",{className:"card p-3 mt-3"},r.a.createElement("div",{style:{fontWeight:"bold",marginBottom:16}},"Color scheme"),[{key:"light",name:"Light"},{key:"dark",name:"Dark"},{key:"automatic",name:"Automatically use OS settings"}].map((function(e){return r.a.createElement("div",{className:"custom-control custom-radio"},r.a.createElement("input",{className:"custom-control-input",checked:e.key===(window.localStorage.getItem("themeMode")||"automatic"),type:"radio",name:"theme-mode",value:e.key,id:"theme-mode-"+e.key,onChange:function(){window.localStorage.setItem("themeMode",e.key);var t=e.key;"automatic"===t&&(t=window.matchMedia("(prefers-colors-scheme: dark)").matches?"dark":"light"),o({theme:ae[t]})}}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"theme-mode-"+e.key},e.name))}))),r.a.createElement("div",{className:"card p-3 mt-3"},r.a.createElement(We,null))))},Fe=a(33),ze=a(142),Pe=a(144),qe=a(145),Me=function(e){var t,a=Object(n.useState)(!1),o=Object(m.a)(a,2),c=o[0],l=o[1],i=Object(n.useState)(!1),u=Object(m.a)(i,2),d=u[0],p=u[1],b=Object(n.useState)({}),g=Object(m.a)(b,2),v=g[0],y=g[1],w=Object(n.useContext)(ne),E=Object(m.a)(w,1)[0],x=[{name:"hot",to:"/",width:48},{name:"new",to:"/new",width:48},{name:"top",width:48,subitems:[{name:"week",to:"/top/week"},{name:"month",to:"/top/month"},{name:"year",to:"/top/year"},{name:"all",to:"/top/all"}]},{name:"random",to:"/random",width:80},{name:"about",to:"/about",width:80}],j=Object(h.g)(),O=x.find((function(e){return e.to===j.pathname||e.subitems&&e.subitems.find((function(e){return e.to===j.pathname}))})),k=null===O||void 0===O||null===(t=O.subitems)||void 0===t?void 0:t.find((function(e){return e.to===j.pathname})),S="menu",N="/",C=k&&k.to||(null===O||void 0===O?void 0:O.to)&&O.to||N,_=k&&O&&O.name+" | "+k.name||O&&O.name||S;return r.a.createElement("header",null,r.a.createElement("div",{style:{maxWidth:960,paddingLeft:16,paddingRight:16,display:"flex",alignItems:"center",flex:1,textAlign:"center",whiteSpace:"nowrap",minWidth:0,width:"100%"}},r.a.createElement("div",{style:{marginRight:32}},r.a.createElement("a",{href:"/",className:"no-link-styling d-flex align-items-center"},r.a.createElement("div",{className:"d-flex mr-3"},[4,4,0].map((function(e,t){return r.a.createElement("div",{key:t,style:{width:6,height:23,marginRight:e,background:"black",borderRadius:1}})}))),"Dwitter.net")),r.a.createElement("div",{className:"d-flex d-sm-none"},r.a.createElement(ze.a,{isOpen:d,toggle:function(){return p(!d)}},r.a.createElement(Pe.a,{caret:!0},O&&r.a.createElement(f.c,{to:C,exact:!0,style:{pointerEvents:"none",display:"inline-block",marginRight:8},activeStyle:{fontWeight:"bold"}},_)),r.a.createElement(qe.a,null,x.map((function(e,t){var a;return e.to?r.a.createElement(f.b,{key:t,className:"dropdown-item",to:e.to,onClick:function(){return p(!1)},style:{fontWeight:e.to===j.pathname?"bold":"normal"}},e.name):null===(a=e.subitems)||void 0===a?void 0:a.map((function(t,a){return r.a.createElement(f.b,{key:a,className:"dropdown-item",to:t.to,onClick:function(){return p(!1)},style:{fontWeight:t.to===j.pathname?"bold":"normal"}},e.name," | ",t.name)}))}))))),r.a.createElement("div",{className:"d-none d-sm-flex align-items-center"},x.map((function(e,t){var a;return e.subitems?r.a.createElement("div",{key:t},r.a.createElement(ze.a,{isOpen:v[e.name],toggle:function(){return y((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(Fe.a)({},e.name,!t[e.name]))}))}},r.a.createElement(Pe.a,{caret:!0},r.a.createElement(f.c,{key:e.name,to:["week","month","year","all"].filter((function(e){return j.pathname==="/top/"+e})).join("")||"/top",exact:!0,style:{width:e.width},activeStyle:{fontWeight:"bold"},onClick:function(t){return e.subitems&&t.preventDefault()}},e.name,["week","month","year","all"].filter((function(e){return j.pathname==="/top/"+e})).map((function(e){return" | "+e})))),r.a.createElement(qe.a,null,null===(a=e.subitems)||void 0===a?void 0:a.map((function(e){return r.a.createElement(f.c,{className:"dropdown-item",key:e.name,to:e.to,exact:!0,activeStyle:{fontWeight:"bold"},onClick:function(){return y({})}},e.name)}))))):r.a.createElement(f.c,{key:e.name,to:e.to,exact:!0,style:{width:e.width},activeStyle:{fontWeight:"bold"}},e.name)}))),r.a.createElement("div",{style:{flex:1}}),r.a.createElement("div",{className:"create-new-dweet"},r.a.createElement(f.c,{to:"/create",className:"btn btn-primary d-flex align-items-center justify-content-center"},r.a.createElement("span",{className:"plus-icon"}),r.a.createElement("span",{className:"create-new-dweet-label"},"New ",r.a.createElement("span",{className:"create-dweet-label"},"dweet")))),E.user?r.a.createElement(ze.a,{isOpen:c,toggle:function(){return l(!c)},style:{marginRight:-16,minWidth:0},className:"settings-dropdown"},r.a.createElement(Pe.a,{style:{paddingLeft:16,paddingRight:16,width:"100%"}},r.a.createElement(X,{user:E.user,link:!1})),r.a.createElement(qe.a,{className:"right"},r.a.createElement(f.b,{className:"dropdown-item",to:"/u/"+E.user.username+"/top",onClick:function(){l(!1)}},"My dweets"),r.a.createElement(f.b,{className:"dropdown-item",to:"/"+E.user.username+"/settings",onClick:function(){l(!1)}},"Settings"),r.a.createElement("div",{style:{height:1,background:E.theme.secondaryBorderColor,marginTop:8,marginBottom:8}}),r.a.createElement(f.b,{className:"dropdown-item",to:"/",onClick:function(e){e.preventDefault(),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/"}},"Log out"))):r.a.createElement(f.c,{to:"/accounts/login",exact:!0,style:{marginLeft:15}},"Log in")))},Ue=function(e){return r.a.createElement(Se,Object.assign({name:"New dweets",order_by:"-posted",period:"all"},e))},Ke=function(e){return r.a.createElement(Se,Object.assign({name:"Random dweets",order_by:"?",period:"all"},e))},Ye=function(e){return r.a.createElement(Se,Object.assign({name:"Top dweets",order_by:"-awesome_count"},e))},Ze=function(e){return r.a.createElement(Se,Object.assign({name:"Hot dweets",order_by:"-hotness"},e))},He=function(e){return r.a.createElement(Se,Object.assign({name:"New dweets for #"+e.match.params.hashtag,order_by:"-posted"},e))},Ge=function(e){return r.a.createElement(Se,Object.assign({name:"Top dweets for #"+e.match.params.hashtag,order_by:"-awesome_count"},e))},Je=function(e){return r.a.createElement(Se,Object.assign({name:"Hot dweets for #"+e.match.params.hashtag,order_by:"-hotness"},e))},Ve=function(e){return r.a.createElement(Se,Object.assign({name:"Hot dweets for u/"+e.match.params.username,order_by:"-hotness"},e))},$e=function(e){return r.a.createElement(Se,Object.assign({name:"Top dweets for u/"+e.match.params.username,order_by:"-awesome_count"},e))},Qe=function(e){return r.a.createElement(Se,Object.assign({name:"New dweets for u/"+e.match.params.username,order_by:"-posted"},e))},Xe=function(){var e=tt[et];d.linkify.add(e.prefix,{validate:function(t,a){var n=t.slice(a);if(e.regex.test(n)){var r=n.match(e.regex);if(r)return r[0].length}return 0},normalize:e.normalize})},et=0,tt=[{prefix:"d/",regex:/[a-zA-Z0-9_]+/,normalize:function(e){return e.url="/"+e.url}},{prefix:"u/",regex:/[a-zA-Z0-9_]+/,normalize:function(e){return e.url="/"+e.url}},{prefix:"c/",regex:/[a-zA-Z0-9_]+/,normalize:function(e){return e.url="/"+e.url}},{prefix:"#",regex:/[a-zA-Z_][a-zA-Z0-9_-]+/,normalize:function(e){return e.url="/h/"+e.url.slice(1)+"/top"}}];et<tt.length;et++)Xe();var at=function(){var e=Object(n.useState)(null),t=Object(m.a)(e,2),a=t[0],o=t[1],c=localStorage.getItem("themeMode")||"automatic";"automatic"===c&&(c=window.matchMedia("(prefers-colors-scheme: dark)").matches?"dark":"light");var l=Object(n.useState)({theme:ae[c],user:JSON.parse(localStorage.getItem("user")||"null"),requireLogin:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("user")){e.next=2;break}return e.abrupt("return");case 2:if(!a){e.next=6;break}return e.next=5,a.promise;case 5:return e.abrupt("return",e.sent);case 6:return(n=Object(s.a)({},t)).promise=new Promise((function(e,t){n.resolve=e,n.reject=t})),o(n),e.prev=9,e.next=12,n.promise;case 12:e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(9),o(null),new Error;case 18:a===n&&o(null);case 19:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t){return e.apply(this,arguments)}}()}),d=Object(m.a)(l,2),p=d[0],b=d[1],g="/favicon-"+p.theme.key+"/";return r.a.createElement(ne.Provider,{value:[p,function(e){return b(Object(s.a)(Object(s.a)({},p),e))}]},r.a.createElement("style",null,":root {".concat(Object.entries(p.theme).map((function(e){var t=Object(m.a)(e,2);return"--"+t[0]+": "+t[1]})).join(";"),"}")),r.a.createElement(f.a,null,r.a.createElement("div",{className:"App",style:{background:p.theme.pageBackgroundColor,color:p.theme.mainTextColor}},r.a.createElement(ke.a,{titleTemplate:"%s | Dwitter.net"},r.a.createElement("title",null,"Dwitter.net - Javascript demos in 140 characters"),r.a.createElement("link",{rel:"apple-touch-icon",sizes:"180x180",href:g+"apple-touch-icon.png"}),r.a.createElement("link",{rel:"icon",type:"image/png",sizes:"32x32",href:g+"favicon-32x32.png"}),r.a.createElement("link",{rel:"icon",type:"image/png",sizes:"16x16",href:g+"favicon-16x16.png"})),r.a.createElement(Me,null),r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"/accounts/login/",exact:!0,component:Ce}),r.a.createElement(h.b,{path:"/accounts/register/",exact:!0,component:Ie}),r.a.createElement(h.b,{path:"/create",exact:!0,component:Te}),p.user&&r.a.createElement(h.b,{path:"/"+p.user.username+"/settings",exact:!0,component:Ae}),r.a.createElement(h.b,{path:"/d/:id",exact:!0,component:Re}),r.a.createElement(h.b,{path:"/new",exact:!0,component:Ue}),r.a.createElement(h.b,{path:"/top/week",exact:!0,component:function(e){return r.a.createElement(Ye,Object.assign({period:"week"},e))}}),r.a.createElement(h.b,{path:"/top/month",exact:!0,component:function(e){return r.a.createElement(Ye,Object.assign({period:"month"},e))}}),r.a.createElement(h.b,{path:"/top/year",exact:!0,component:function(e){return r.a.createElement(Ye,Object.assign({period:"year"},e))}}),r.a.createElement(h.b,{path:"/top/all",exact:!0,component:function(e){return r.a.createElement(Ye,Object.assign({period:"all"},e))}}),r.a.createElement(h.b,{path:"/random",exact:!0,component:Ke}),r.a.createElement(h.b,{path:"/h/:hashtag/top",exact:!0,component:Ge}),r.a.createElement(h.b,{path:"/h/:hashtag/hot",exact:!0,component:Je}),r.a.createElement(h.b,{path:"/h/:hashtag",exact:!0,component:Je}),r.a.createElement(h.b,{path:"/h/:hashtag/new",exact:!0,component:He}),r.a.createElement(h.b,{path:"/u/:username/top",exact:!0,component:$e}),r.a.createElement(h.b,{path:"/u/:username/hot",exact:!0,component:Ve}),r.a.createElement(h.b,{path:"/u/:username",exact:!0,component:Ve}),r.a.createElement(h.b,{path:"/u/:username/new",exact:!0,component:Qe}),r.a.createElement(h.b,{path:"/about",exact:!0,component:De}),r.a.createElement(h.b,{path:"",exact:!0,component:Ze}))),r.a.createElement(ie.a,{isOpen:!!a,keyboard:!0,toggle:function(){return a&&a.reject()}},r.a.createElement("div",{className:"p-3"},r.a.createElement("div",{className:"d-flex justify-content-center align-items-center flex-column"},r.a.createElement("div",{className:"d-flex justify-content-center align-items-stretch flex-column"},r.a.createElement("div",{className:"alert alert-info",style:{marginTop:16,marginBottom:32,maxWidth:288}},a&&a.reason),a&&r.a.createElement(Ne,{nextAction:a.nextAction,onLogin:function(){a.resolve(),o(null)}})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(at,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},74:function(e,t,a){e.exports=a(141)},79:function(e,t,a){},81:function(e,t,a){}},[[74,1,2]]]);
//# sourceMappingURL=main.5aa3b430.chunk.js.map